Entrega 3:

Nombre del trabajo: Costo de Vida Universario en Chile 

## EAE253B - Econom√≠a y Ciencia de Datos  
> **Autores:** Andr√© van Bavel | Nicol√°s Droppelmann  
> **Profesor:** Carlos Alvarado  
> **Semestre:** 2do semestre 2025  
> **Fecha:** 6 de noviembre de 2025  

---

**1. Descripci√≥n del Proyecto y Objetivos**

Esta API busca analizar c√≥mo la inflaci√≥n y el tipo de cambio afectan el costo de vida mensual de un estudiante universitario en Chile.  
La idea es integrar datos personales (como los gastos del estudiante) con informaci√≥n econ√≥mica real obtenida de la API p√∫blica [mindicador.cl](https://mindicador.cl), que entrega valores actualizados del IPC y del d√≥lar observado (USDCLP).

El sistema fue desarrollado en FastAPI y utiliza una base de datos SQLite, lo que permite guardar, actualizar y consultar informaci√≥n.  
Adem√°s, cuenta con un script de **ingesta autom√°tica** que descarga datos reales desde internet y los almacena directamente en la base de datos local.
  
---

Instalaci√≥n y Configuraci√≥n**

### **Requisitos Previos**
- Python 3 
- pip instalado  

**2. Crear el Entorno Virtual e Instalar Dependencia**

python -m venv venv
source venv/bin/activate    # (Mac/Linux)
venv\Scripts\activate       # (Windows)
pip install fastapi uvicorn requests sqlite3

**3. Crear la Base de Datos**

sqlite3 gastos.db < schema.sql

**4. Cargar Datos desde la API Externa**

ejecutar (python scripts/ingesta.py) en la terminal

si todo sale bien deberia salir:

‚úÖ Datos de IPC y tipo de cambio guardados correctamente en la base local.

**5. Ejecutar la API**

en la terminal: uvicorn main:app --reload

entrar al link: http://127.0.0.1:8000/docs

**6. Estructura del Proyecto**

proyecto-costo-vida/
‚îÇ
‚îú‚îÄ‚îÄ main.py                 # codigo principal
‚îú‚îÄ‚îÄ schema.sql              # Esquema de la base de datos (SQLite)
‚îú‚îÄ‚îÄ gastos.db               # Base de datos local donde se guardan los datos
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ ingesta.py          # Script que descarga y guarda datos del IPC y USD/CLP
‚îú‚îÄ‚îÄ README.md               # Documento explicativo del proyecto (esta entrega)

## üìã **7. Detalle de Endpoints**

### **Endpoints Personales**

GET /api/db/gastos
Entrega todos los gastos personales guardados en la base de datos.

**Descripci√≥n:**  
Este endpoint muestra la lista completa de los gastos personales ingresados por el usuario.  
Cada gasto tiene una categor√≠a y un monto, y sirve como base para analizar el presupuesto mensual del estudiante.

**Ejemplo de respuesta:**
```json
[
  {"id": 1, "categoria": "Comida", "monto": 85000},
  {"id": 2, "categoria": "Transporte", "monto": 30000},
  {"id": 3, "categoria": "Ocio", "monto": 20000}
]

POST /api/db/gastos
Permite agregar un nuevo gasto a la base de datos.

Descripci√≥n:
Sirve para que el usuario ingrese un nuevo gasto personal dentro de su presupuesto mensual.
Este endpoint escribe en la base de datos local (SQLite).

Ejemplo de body:

{
  "categoria": "Educaci√≥n",
  "monto": 40000
}


Ejemplo de respuesta:

{"mensaje": "Gasto agregado correctamente."}

**Endpoints Econ√≥micos**

GET /api/economia/ipc

Obtiene el √∫ltimo valor de inflaci√≥n (IPC) desde la API p√∫blica mindicador.cl.

Descripci√≥n:
Consulta el valor m√°s reciente del IPC (√çndice de Precios al Consumidor), que mide la inflaci√≥n mensual en Chile.
Se usa para ajustar el poder adquisitivo del presupuesto del estudiante.

Ejemplo de respuesta:

{
  "nombre": "ipc",
  "unidad_medida": "Porcentaje",
  "valor": 4.2
}

GET /api/economia/tipo_cambio

Muestra el tipo de cambio actual (USD/CLP).

Descripci√≥n:
Obtiene el valor del d√≥lar observado en pesos chilenos (USD/CLP).
Esto permite calcular c√≥mo se encarecen servicios o suscripciones internacionales cuando el d√≥lar sube.

Ejemplo de respuesta:

{
  "nombre": "dolar",
  "unidad_medida": "Pesos",
  "valor": 980.3
}

**Endpoints de Base de Datos**
GET /api/db/indicadores?indicador=ipc

Devuelve los registros hist√≥ricos guardados del IPC o tipo de cambio.

Descripci√≥n:
Permite consultar los valores guardados en la base de datos local, que fueron descargados por el script ingesta.py.
Puede usarse para comparar variaciones a lo largo del tiempo.

Ejemplo de respuesta:

[
  {"fecha": "2025-11-01", "indicador": "ipc", "valor": 4.1},
  {"fecha": "2025-11-02", "indicador": "ipc", "valor": 4.2}
]

POST /api/db/indicadores

Permite insertar manualmente un nuevo registro en la tabla de indicadores.

Ejemplo de body:

{
  "fecha": "2025-11-06",
  "indicador": "dolar",
  "valor": 985.5
}


Ejemplo de respuesta:

{"mensaje": "Indicador agregado exitosamente."}

Endpoints Anal√≠ticos
GET /api/analisis/impacto-inflacion?periodo=2025-11

Calcula c√≥mo cambia el presupuesto total del estudiante frente al IPC actual.

Descripci√≥n:
Este endpoint analiza el efecto de la inflaci√≥n sobre el presupuesto total del estudiante.
Usa los valores del IPC guardados en la base de datos para estimar el nuevo poder adquisitivo real.

Ejemplo de respuesta:

{
  "periodo": "2025-11",
  "ipc": 4.2,
  "presupuesto_original": 300000,
  "presupuesto_ajustado": 287400,
  "mensaje": "El poder adquisitivo disminuy√≥ un 4.2% en el periodo."
}

GET /api/analisis/sensibilidad-suscripciones?lista=netflix,spotify

Eval√∫a c√≥mo el tipo de cambio afecta los servicios de streaming.

Descripci√≥n:
Calcula el cambio real en el costo mensual de suscripciones en d√≥lares (como Netflix o Spotify) cuando var√≠a el tipo de cambio.
Usa el valor actual del d√≥lar almacenado en la base de datos o desde la API externa.

Ejemplo de respuesta:

{
  "suscripciones": [
    {"nombre": "Netflix", "precio_usd": 9.99, "tipo_cambio": 980.3, "precio_clp": 9792},
    {"nombre": "Spotify", "precio_usd": 5.99, "tipo_cambio": 980.3, "precio_clp": 5874}
  ],
  "mensaje": "Los precios se actualizaron seg√∫n el tipo de cambio actual."
}

**8. Base de Datos**
Esquema de Datos
CREATE TABLE gastos (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  categoria TEXT,
  monto REAL
);

CREATE TABLE indicadores (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  fecha TEXT,
  indicador TEXT,
  valor REAL
);


Descripci√≥n:
La base de datos cuenta con dos tablas principales:

gastos: almacena los registros personales ingresados por el usuario.

indicadores: guarda los datos del IPC y tipo de cambio descargados desde la API externa.

Esto permite combinar informaci√≥n personal con variables macroecon√≥micas en los endpoints anal√≠ticos.

Datos de Ejemplo

5 registros de gastos (comida, transporte, ocio, educaci√≥n, vivienda)

10 registros de IPC y tipo de cambio desde la API mindicador.cl


**9. Tecnolog√≠as Utilizadas**

FastAPI: Framework principal para la API

SQLite: Base de datos ligera y local

Python Requests: Para conectarse con APIs externas

Uvicorn: Servidor local de desarrollo

mindicador.cl: Fuente oficial de datos econ√≥micos

**10. Contribuci√≥n del Equipo**

Andr√©: Desarrollo del c√≥digo base, endpoints y conexi√≥n SQL

Nicol√°s: Desarrollo c√≥digo base, Documentaci√≥n, testing y presentaci√≥n final

**11. Licencia**

Proyecto desarrollado para el curso EAE253B - Econom√≠a y Ciencia de Datos
Pontificia Universidad Cat√≥lica de Chile - 2025

**12. Agradecimientos**

Profesor Carlos Alvarado y ayudantes del curso

Portal mindicador.cl por proveer datos p√∫blicos

Comunidad de FastAPI por la documentaci√≥n y soporte

**13. Pr√≥ximos Pasos y Mejoras**
- Agregar cache para respuestas de APIs externas (menos latencia).
- Autenticaci√≥n b√°sica para endpoints que escriben en BD.
- Test unitarios de endpoints (pytest) y script CI simple.
- Endpoint anal√≠tico adicional para sensibilidad por d√≥lar en canasta mixta (CLP + USD).

---

**14. Metodolog√≠a de Trabajo**
Trabajamos de forma colaborativa con Visual studio code, compartiendo un archivo y a√±adiendo de manera separada y simultanea. Entre clases, ayudant√≠as, apoyo de compa√±eros e investigaci√≥n personal acerca del tema llevamos a cabo el paso apaso del proyecto.

---

**15. Contacto**
**Estudiante 1:** Andr√© van Bavel ‚Äî [andre.vanbavel@uc.cl]  
**Estudiante 2:** Nicol√°s Droppelmann ‚Äî [ndroppelmann@uc.cl]  
**Profesor:** Carlos Alvarado ‚Äî cealvara@uc.cl  
**Repositorio:** https://github.com/[andrevanbavel-web]/[Grupo-Trabajo-Ciencia-de-Datos/Trabajo]  

---

**16. √öltima actualizaci√≥n**
6 de noviembre de 2025
